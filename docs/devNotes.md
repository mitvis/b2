# Dev Notes

## Architecture

context --> state --> UI

api(& magic) --> (1) event loop (2) UI

event loop --> (1) state, (2) UI

## Terminology

When we say visualization, it could mean either chart or profiler, and they share the same id and the same layout logic.

## Debugging Gotchas

When the Python generated by JavaScript via `IPython.notebook.kernel.execute`

## Engineering concerns

When the code is written, the types of the chart could be inferred even if the data is not ready, but this is unfortunately hard to analyze statically.

## TODO

## References

https://testnb.readthedocs.io/en/latest/examples/Notebook/Distributing%20Jupyter%20Extensions%20as%20Python%20Packages.html

## Hacks

Added `view(name: string): any;` to `vega-typings/types/runtime/index.d.ts`.

## Some relevant source code

https://github.com/ipython/ipython/blob/master/IPython/core/interactiveshell.py

The following describes a python class.

```python
class ExecutionResult(object):
    """The result of a call to :meth:`InteractiveShell.run_cell`
    Stores information about what took place.
    """
    execution_count = None
    error_before_exec = None
    error_in_exec = None
    info = None
    result = None
```

and that of [run_cell](https://github.com/ipython/ipython/blob/master/IPython/core/interactiveshell.py#L2828)
